<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–≥–æ–¥–∞ –≤ –õ–∏–ø–µ—Ü–∫–µ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
            background-color: #f0f8ff;
        }
        .weather-container {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .error {
            color: #d9534f;
            font-weight: bold;
        }
        .loading {
            color: #5bc0de;
        }
        .weather-icon {
            font-size: 3rem;
            margin: 10px 0;
        }
        .temperature {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
        }
        .refresh-btn {
            margin-top: 15px;
            padding: 8px 16px;
            background-color: #5cb85c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>–ü–æ–≥–æ–¥–∞ –≤ –õ–∏–ø–µ—Ü–∫–µ</h1>
    
    <div id="weather" class="weather-container">
        <p class="loading">–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ...</p>
    </div>
    
    <button id="refresh" class="refresh-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>

    <script>
        // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –õ–∏–ø–µ—Ü–∫–∞
        const latitude = 52.60882;
        const longitude = 39.59922;
        
        // –ü–æ–ª—É—á–∞–µ–º –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–æ–≥–æ–¥—É
        async function getWeather() {
            const weatherContainer = document.getElementById('weather');
            
            try {
                weatherContainer.innerHTML = '<p class="loading">–ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ...</p>';
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º Open-Meteo (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á–∞ –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
                const response = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`
                );
                
                if (!response.ok) {
                    throw new Error('–°–µ—Ä–≤–µ—Ä –ø–æ–≥–æ–¥—ã –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
                }
                
                const data = await response.json();
                
                if (!data.current_weather) {
                    throw new Error('–î–∞–Ω–Ω—ã–µ –æ –ø–æ–≥–æ–¥–µ –Ω–µ –ø–æ–ª—É—á–µ–Ω—ã');
                }
                
                const weather = data.current_weather;
                const temperature = weather.temperature;
                const weatherCode = weather.weathercode;
                
                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∫–æ–¥ –ø–æ–≥–æ–¥—ã –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
                const weatherDescription = getWeatherDescription(weatherCode);
                const weatherEmoji = getWeatherEmoji(weatherCode);
                
                weatherContainer.innerHTML = `
                    <div class="weather-icon">${weatherEmoji}</div>
                    <div class="temperature">${temperature}¬∞C</div>
                    <p>${weatherDescription}</p>
                    <p><small>–û–±–Ω–æ–≤–ª–µ–Ω–æ: ${new Date().toLocaleTimeString()}</small></p>
                `;
            } catch (error) {
                weatherContainer.innerHTML = `
                    <p class="error">–û—à–∏–±–∫–∞: ${error.message}</p>
                    <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.</p>
                `;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –ø–æ–≥–æ–¥—ã –≤ –æ–ø–∏—Å–∞–Ω–∏–µ
        function getWeatherDescription(code) {
            const descriptions = {
                0: '–Ø—Å–Ω–æ',
                1: '–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —è—Å–Ω–æ',
                2: '–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å',
                3: '–ü–∞—Å–º—É—Ä–Ω–æ',
                45: '–¢—É–º–∞–Ω',
                48: '–¢—É–º–∞–Ω —Å –∏–Ω–µ–µ–º',
                51: '–ú–æ—Ä–æ—Å—å: —Å–ª–∞–±–∞—è',
                53: '–ú–æ—Ä–æ—Å—å: —É–º–µ—Ä–µ–Ω–Ω–∞—è',
                55: '–ú–æ—Ä–æ—Å—å: —Å–∏–ª—å–Ω–∞—è',
                56: '–õ–µ–¥—è–Ω–∞—è –º–æ—Ä–æ—Å—å: —Å–ª–∞–±–∞—è',
                57: '–õ–µ–¥—è–Ω–∞—è –º–æ—Ä–æ—Å—å: —Å–∏–ª—å–Ω–∞—è',
                61: '–î–æ–∂–¥—å: —Å–ª–∞–±—ã–π',
                63: '–î–æ–∂–¥—å: —É–º–µ—Ä–µ–Ω–Ω—ã–π',
                65: '–î–æ–∂–¥—å: —Å–∏–ª—å–Ω—ã–π',
                66: '–õ–µ–¥—è–Ω–æ–π –¥–æ–∂–¥—å: —Å–ª–∞–±—ã–π',
                67: '–õ–µ–¥—è–Ω–æ–π –¥–æ–∂–¥—å: —Å–∏–ª—å–Ω—ã–π',
                71: '–°–Ω–µ–≥: —Å–ª–∞–±—ã–π',
                73: '–°–Ω–µ–≥: —É–º–µ—Ä–µ–Ω–Ω—ã–π',
                75: '–°–Ω–µ–≥: —Å–∏–ª—å–Ω—ã–π',
                77: '–°–Ω–µ–∂–Ω—ã–µ –∑–µ—Ä–Ω–∞',
                80: '–õ–∏–≤–µ–Ω—å: —Å–ª–∞–±—ã–π',
                81: '–õ–∏–≤–µ–Ω—å: —É–º–µ—Ä–µ–Ω–Ω—ã–π',
                82: '–õ–∏–≤–µ–Ω—å: —Å–∏–ª—å–Ω—ã–π',
                85: '–°–Ω–µ–≥–æ–ø–∞–¥: —Å–ª–∞–±—ã–π',
                86: '–°–Ω–µ–≥–æ–ø–∞–¥: —Å–∏–ª—å–Ω—ã–π',
                95: '–ì—Ä–æ–∑–∞: —Å–ª–∞–±–∞—è –∏–ª–∏ —É–º–µ—Ä–µ–Ω–Ω–∞—è',
                96: '–ì—Ä–æ–∑–∞ —Å –≥—Ä–∞–¥–æ–º: —Å–ª–∞–±–∞—è',
                99: '–ì—Ä–æ–∑–∞ —Å –≥—Ä–∞–¥–æ–º: —Å–∏–ª—å–Ω–∞—è'
            };
            
            return descriptions[code] || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è';
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è emoji –ø–æ –∫–æ–¥—É –ø–æ–≥–æ–¥—ã
        function getWeatherEmoji(code) {
            if (code === 0) return '‚òÄÔ∏è';
            if (code <= 3) return '‚õÖ';
            if (code <= 48) return 'üå´Ô∏è';
            if (code <= 67) return 'üåßÔ∏è';
            if (code <= 77) return '‚ùÑÔ∏è';
            if (code <= 86) return 'üå®Ô∏è';
            if (code <= 99) return '‚õàÔ∏è';
            return 'üåà';
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–≥–æ–¥—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', getWeather);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ –∫–Ω–æ–ø–∫–µ
        document.getElementById('refresh').addEventListener('click', getWeather);
        
        // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
        setInterval(getWeather, 30 * 60 * 1000);
    </script>
</body>
</html>